<!DOCTYPE html>
<html ng-app="lunchApp" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Hello Spring Security</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="/css/main.css" th:href="@{/css/main.css}"/>
    <!--    <script>
            var zoom=18;

            var map; //complex object of type OpenLayers.Map

            //Initialise the 'map' object
            function init(lat, lon) {
                console.log(lat);
                console.log(lon);

                map = new OpenLayers.Map ("map", {
                    controls:[
                        new OpenLayers.Control.Navigation(),
                        new OpenLayers.Control.MousePosition(),
                        new OpenLayers.Control.Attribution()],
                    maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
                    maxResolution: 156543.0339,
                    numZoomLevels: 19,
                    units: 'm',
                    projection: new OpenLayers.Projection("EPSG:900913"),
                    displayProjection: new OpenLayers.Projection("EPSG:4326")
                } );

                layerMapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");
                map.addLayer(layerMapnik);

                if( ! map.getCenter() ){
                    var lonLat = new OpenLayers.LonLat(lon, lat).transform(new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject());
                    map.setCenter (lonLat, zoom);
                }
            }
        </script>-->
</head>

<body>
<div th:substituteby="index::logout"></div>
<h1>This is a secured page!</h1>

<!--<div ng-controller="groupCtrl">-->
<!--<div ng-repeat="lunch in lunchgroups" ng-click="showme=!showme">{{lunch.title}}-->
<!--<div ng-show="showme"> {{lunch.date}} {{lunch.time}} {{lunch.isPublic}} {{lunch.place}} {{lunch.users}}-->
<!--<button ng-click="addToGroup(lunch)">Add me</button>-->
<!---->
<!--</div>-->
<!--</div>-->
<!--<div>-->
<!--{{activeGroup}}-->
<!--</div>-->
<!--</div>-->

<div ng-controller="groupCtrl">
    <div ng-controller="mapCtrl">
        <div ng-repeat="lunch in lunchgroups" ng-click="showme=!showme; setLoc(lunch)">{{lunch.title}}
            <div ng-show="showme"> {{lunch.date}} {{lunch.time}} {{lunch.isPublic}} {{lunch.place}} {{lunch.users}}
                <button ng-click="addToGroup(lunch)">Add me</button>
                <div style="width:500px; height:300px" id="map"></div>
            </div>
        </div>
    </div>
    <div>
        {{activeGroup}}
    </div>
</div>



<!--<div ng-controller="mapCtrl">
    <span>Location URLÂ´s</span>
    <ul>
        <li ng-repeat="location in locations">
            &lt;!&ndash;<input type="button" ng-click="init({{location.lat}},{{location.lon}});"/>&ndash;&gt;
            <button ng-click="setLoc(location)"/>
            {{location.lon}} {{location.lat}}
        </li>
    </ul>

</div>-->
<p><a href="/index" th:href="@{/index}">Back to home page</a></p>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
<script src="/scripts/OpenLayers.js"></script>
<script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>
<script src="/scripts/app.controller.js"></script>
<script src="/scripts/app.js"></script>
</body>

</html>